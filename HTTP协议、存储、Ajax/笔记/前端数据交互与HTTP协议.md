>2021.9.26

# 前端数据交互与HTTP协议

## 初识前后端通信

### 前后端通信是什么

- 前端和后端数据交互的过程
- 浏览器和服务器之间数据交互的过程

### 后端向前端发送数据

- 访问页面

### 前端向后端发送数据

- 登陆注册

## 前后端通信的过程与概念解释

### 前后端通信的过程

- 浏览器 --- 请求数据 --> 服务器
- 浏览器 <-- 响应数据 --- 服务器
- 前后端的通信是在 ‘请求-响应’ 中完成的

### 概念解释

- 前端：浏览器端
- 客户端：只要能和服务器端通信的就叫客户端
- 后端：服务器端

## 前后端的通信方式

- 使用浏览器访问网页
  - 在浏览器地址栏输入网址，按下回车
- HTML的标签
  - 浏览器在解析HTML标签的时候，遇到一些特殊的标签，会再次向服务器发送请求
    - link/img/script/(iframe)
  - 还有一些标签，浏览器解析的时候，不会向服务器发送请求，但是用户可以使他们向服务器发送请求
    - a超链接/form表单
- Ajax 和 Fetch

## 初识HTTP

### HTTP是什么

- HTTP是一个请求-响应协议
- HTTP：HyperText Transfer Protocol //超文本传输协议
- HTML：超文本标记语言
- 超文本：原先一个个单一的文本，通过超链接将其联系起来。由原先的单一的文本变成了可无限延伸、扩展的超级文本
- HTML、CSS、JS、图片、字体、音频、视频等等文件，都是通过HTTP（超文本传输协议）在服务器和浏览器之间传输
- 每一次前后端通信，前端需要主动向后端发出请求，后端接收到前端的请求后，可以给出响应

### HTTP请求响应的过程

### HTTP报文是什么

- 浏览器向服务器发送请求的时候，请求本身就是信息，叫请求报文
- 服务器向浏览器发送响应时传输的信息，叫响应报文

### HTTP报文格式

- 请求报文
  - 请求头：起始行+首部
  - 请求体
  > GET请求，没有请求体，数据通过请求头携带   
  > POST请求，有请求体，数据通过请求体携带
- 响应报文
  - 响应头：起始行+首部
  - 响应体

### HTTP方法

#### 常用的HTTP方法

浏览器发送请求时的方法称为HTTP方法，和响应无关。   
常用的HTTP方法有：GET、POST、PUT、DELETE......   
HTTP方法用来定义对于资源采取什么样的操作，有各自的语义。   

#### HTTP方法的语义

- GET 获取数据
  - 获取资源（文件）
- POST 创建数据
  - 注册
- PUT 更新数据
  - 修改个人信息，修改密码等
- DELETE 删除数据
  - 删除一条评论

> 查 增 改 删  
这些方法虽然有各自的语义，但是并不是强制的。  

#### RESTful接口设计

RESTful接口设计，是一种接口设计风格，充分利用HTTP方法的语义  

- 通过用户ID获取个人信息
  - 使用GET方法: https://www.baidu.com/api/http/getUser?id=1
  - RESTful,使用GET: https://www.baidu.com/api/http/user?id=1
- 注册新用户
  - 常规使用POST方法: https://www.baidu.com/api/http/addUser
  - RESTful,使用POST: https://www.baidu.com/api/http/user
- 修改一个用户
  - 常规使用POST方法: https://www.baidu.com/api/http/modifyUser 
  - RESTful,使用PUT: https://www.baidu.com/api/http/user
- 删除一个用户
  - 常规使用POST方法: https://www.baidu.com/api/http/getUser?id=1
  - RESTful,使用DELETE: https://www.baidu.com/api/http/user  

### GET 和 POST 方法的对比

- 语义
  - GET: 获取数据
  - POST: 创建数据
- 发送数据
  - GET
    - 通过地址在请求头携带数据
    - 能携带的数据量和地址的长度有关系，一般最多就几k
  - POST
    - 既可以通过地址在请求头中携带数据，也可以通过请求体携带数据
    - 能携带的数据理论上是无限的
  >携带少量数据，可以使用GET请求，大量的数据可以使用POST请求
- 缓存
  - GET: 可以被缓存。GET请求连同它携带的数据，都是通过地址来发送的，而地址是一般会给浏览器缓存的。
  - POST: 不会被缓存。POST请求数据不通过地址来发送，而一般通过请求体来发送。所以不会被缓存。
- 安全性
  - GET 和 POST 都不安全。
  - 发送密码或其他敏感信息时不要使用GET，主要是避免直接被他人窥屏或通过历史记录找到你的密码。

### HTTP状态码

- HTTP状态码是什么
  - 定义服务器对请求的处理结果，是服务器返回的，在响应中，不是在请求中。
- HTTP状态码的语义
  - 100～199
    - 表示消息：代表请求已被接受，需要继续处理
    - 如：101 websocket
  - 200～299
    - 表示成功，如200
  - 300～399
    - 表示重定向
    - 如: 301 Moved Permanently
    - 如: 302 Move Temporarily
    - 如: 304 Not Modified
  - 400~499
    - 表示请求错误
    - 如: 400 Bad Request
    - 如: 404 Not Found
  - 500~599
    - 表示服务器错误
    - 如: 500 Internal Server Error